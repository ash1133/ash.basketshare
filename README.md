## Модуль "Поделиться корзиной"

Реализует функционал поделится корзиной по короткой ссылке (используется стандартный функционал Bitrix'а (CBXShortUri), он не тронут от слова "совсем". Фиксируется кол-во использований, дата последнего перехода)

<small>_(черт вас дернул использовать именно его, документации 0, событий 0, ORM отсутствует)_</small>

Для хранения корзины, короткой ссылки (ID), идентификатора поделившегося (FUSER_ID), даты создания, и даты окончания жизни используется HLBlock.

HLBlock создается при установке модуля.
Предусмотрен функционал удаления модуля с сохранением таблиц.

Установлено событие удаления "быстрых ссылок" при удалении элемента HLBlock'а.

Реализованно перехват события (только вклинивание своей логики) перехода по "короткой ссылки" для наполнения корзины. Происходит только наполнение корзины, работа "коротких ссылок" не нарушена. 
Корзина наполняется толлько доступными для заказа товарами.

Предусмотрен функционал удаления ссылок и HLBlock по времени жизн (задается в настройках модуля) _(возможно)_

У модуля предусмотрены события 

- ***OnBeforeCreateShareLink***
- ***OnAfterCreateShareLink***
- ****OnBeforeApplySharedBasket****
- ***OnAfterApplySharedBasket***


В коробке с модулем идет компонент для интеграции в/около корзины 

В компоненте предусмотрена возможность размещения кнопки _"поделиться корзиной"_ как "отдельно стоящей" кнопкой так и добавление кнопки в контейнер любого элемента по селектору 
_нап: .basket-checkout-block-btn, .basket-items-list-header-filter вставит в каждый элемент с классом .basket-checkout-block-btn и .basket-items-list-header-filter_

Отображение короткой ссылки происходит при клике на кнопку _"поделиться корзиной"_ по ajax запросу к action'у компонента 'generateLinkAction' 

В случае когда пользователь n-ное количество раз решил нажать кнопку _"поделиться корзиной"_, его ожидает провал.
При повторном нажатии на кнопку происходит проверка наполнения корзины и идентификатора поделившегося (FUSER_ID) на совпадение с уже сохраненными корзинами, будет возвращена уже сгенерированная ссылка.

## Код для вставки компонента "Поделиться корзиной"

``
<?$APPLICATION->IncludeComponent(
	"ash:basket.share",
	".default",
	Array(
		"CACHE_TIME" => "36000000",
		"CACHE_TYPE" => "A",
		"COMPONENT_TEMPLATE" => ".default",
		"INCLUDE_IN_BASKET" => "Y",
		"INCLUDE_IN_BASKET_SELECTOR" => ".basket-checkout-block-btn, .basket-items-list-header-filter",
		"POPUP_ID" => "basket-share-popup"
	)
);?>
``

Код толком не причесан, но врятли кто-то будет до этого места будет читать
